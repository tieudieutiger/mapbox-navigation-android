package com.mapbox.navigation.examples.ui

import android.os.Bundle
import androidx.appcompat.app.AppCompatActivity
import com.mapbox.api.directions.v5.models.BannerInstructions
import com.mapbox.api.directions.v5.models.DirectionsRoute
import com.mapbox.geojson.Point
import com.mapbox.mapboxsdk.camera.CameraPosition
import com.mapbox.mapboxsdk.geometry.LatLng
import com.mapbox.mapboxsdk.location.modes.RenderMode
import com.mapbox.mapboxsdk.maps.MapboxMap
import com.mapbox.navigation.base.options.NavigationOptions
import com.mapbox.navigation.base.trip.model.RouteLegProgress
import com.mapbox.navigation.base.trip.model.RouteProgress
import com.mapbox.navigation.core.MapboxNavigation
import com.mapbox.navigation.core.stops.ArrivalObserver
import com.mapbox.navigation.examples.R
import com.mapbox.navigation.ui.NavigationViewOptions
import com.mapbox.navigation.ui.OnNavigationReadyCallback
import com.mapbox.navigation.ui.listeners.BannerInstructionsListener
import com.mapbox.navigation.ui.listeners.NavigationListener
import com.mapbox.navigation.ui.listeners.RouteListener
import com.mapbox.navigation.ui.map.NavigationMapboxMap
import com.mapbox.navigation.utils.internal.ifNonNull
import kotlinx.android.synthetic.main.activity_navigation_view.*
import timber.log.Timber

class NavigationViewActivity : AppCompatActivity(), OnNavigationReadyCallback, NavigationListener,
    BannerInstructionsListener {

    private lateinit var mapboxMap: MapboxMap
    private lateinit var navigationMapboxMap: NavigationMapboxMap
    private lateinit var mapboxNavigation: MapboxNavigation
    private val route by lazy { getDirectionsRoute() }

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_navigation_view)

        navigationView.onCreate(savedInstanceState)
        navigationView.initialize(this, getInitialCameraPosition())
    }

    override fun onLowMemory() {
        super.onLowMemory()
        navigationView.onLowMemory()
    }

    override fun onStart() {
        super.onStart()
        navigationView.onStart()
    }

    override fun onResume() {
        super.onResume()
        navigationView.onResume()
    }

    override fun onStop() {
        super.onStop()
        navigationView.onStop()
    }

    override fun onPause() {
        super.onPause()
        navigationView.onPause()
        // stopLocationUpdates()
    }

    override fun onDestroy() {
        super.onDestroy()
        navigationView.onDestroy()
    }

    override fun onBackPressed() {
        // If the navigation view didn't need to do anything, call super
        if (!navigationView.onBackPressed()) {
            super.onBackPressed()
        }
    }

    override fun onSaveInstanceState(outState: Bundle) {
        navigationView.onSaveInstanceState(outState)
        super.onSaveInstanceState(outState)
    }

    override fun onRestoreInstanceState(savedInstanceState: Bundle) {
        super.onRestoreInstanceState(savedInstanceState)
        navigationView.onRestoreInstanceState(savedInstanceState)
    }

    override fun onNavigationReady(isRunning: Boolean) {
        if (!isRunning && !::navigationMapboxMap.isInitialized) {
            ifNonNull(navigationView.retrieveNavigationMapboxMap()) { navMapboxMap ->
                this.navigationMapboxMap = navMapboxMap
                this.navigationMapboxMap.updateLocationLayerRenderMode(RenderMode.NORMAL)
                this.mapboxMap = navMapboxMap.retrieveMap()
                navigationView.retrieveMapboxNavigation()?.let { this.mapboxNavigation = it }

                val optionsBuilder = NavigationViewOptions.builder()
                optionsBuilder.navigationListener(this)
                optionsBuilder.directionsRoute(route)
                optionsBuilder.shouldSimulateRoute(true)
                optionsBuilder.bannerInstructionsListener(this)
                optionsBuilder.navigationOptions(NavigationOptions.Builder().build())
                optionsBuilder.arrivalObserver(object : ArrivalObserver {
                    override fun onRouteArrival(routeProgress: RouteProgress) {
                        Timber.e("DaiJun ArrivalObserver onRouteArrival")
                    }

                    override fun onStopArrival(routeLegProgress: RouteLegProgress) {
                        Timber.e("DaiJun ArrivalObserver onStopArrival")
                    }
                })

                optionsBuilder.routeListener(object : RouteListener {
                    override fun onFailedReroute(errorMessage: String?) {
                        Timber.e("DaiJun RouteListener onFailedReroute")
                    }

                    override fun allowRerouteFrom(offRoutePoint: Point?): Boolean {
                        Timber.e("DaiJun RouteListener allowRerouteFrom")
                        return true
                    }

                    override fun onRerouteAlong(directionsRoute: DirectionsRoute?) {
                        Timber.e("DaiJun RouteListener onRerouteAlong")
                    }

                    override fun onOffRoute(offRoutePoint: Point?) {
                        Timber.e("DaiJun RouteListener onOffRoute")
                    }
                })
                navigationView.startNavigation(optionsBuilder.build())
            }
        }
    }

    override fun willDisplay(instructions: BannerInstructions?): BannerInstructions {
        return instructions!!
    }

    override fun onNavigationRunning() {
        // todo
    }

    override fun onNavigationFinished() {
        // todo
    }

    override fun onCancelNavigation() {
        navigationView.stopNavigation()
        finish()
    }

    private fun getInitialCameraPosition(): CameraPosition {
        val originCoordinate = route.routeOptions()?.coordinates()?.get(0)
        return CameraPosition.Builder()
            .target(LatLng(originCoordinate!!.latitude(), originCoordinate.longitude()))
            .zoom(15.0)
            .build()
    }

    private fun getDirectionsRoute(): DirectionsRoute {
        // val tokenHere = Utils.getMapboxAccessToken(applicationContext)
        // val directionsRouteAsJson =
        //     "{\"routeIndex\":\"0\",\"distance\":1988.6,\"duration\":433.9,\"geometry\":\"}oragA|dnmhFtO{SvC_ExCtEvLjPfSrXbCdDeCdDmI~KkLzOyGbJqCzD}B`Bc\\\\xc@wBvES^Sb@cAtByApCu@v@_An@wGx@aSdCkCZZxE`Cn^x@zLt@bLF|@XdEXlEx@dMvDbn@TrDXvElClb@`@|G^|ElAlR|@~Mf@|H`@bGfHjgAv@vMX|EtAlRxA`UnCdb@jAvQdJtvAZvETlDXjE~Cdf@nEfr@JxADp@Bf@Dd@Dv@N|BdKv~AzAnUdInoAgEh@wn@pH}C^YD\\\\`FzAjUtGnbATtD`@EvC]j@Ir_@oE\",\"weight\":774.2,\"weight_name\":\"routability\",\"legs\":[{\"distance\":1988.6,\"duration\":433.9,\"summary\":\"Fremont Street, Pine Street\",\"steps\":[{\"distance\":53.7,\"duration\":10.3,\"geometry\":\"}oragA|dnmhFtO{SvC_E\",\"name\":\"Beale Street\",\"mode\":\"driving\",\"maneuver\":{\"location\":[-122.396255,37.791503],\"bearing_before\":0.0,\"bearing_after\":135.0,\"instruction\":\"Head southeast on Beale Street\",\"type\":\"depart\",\"modifier\":\"right\"},\"voiceInstructions\":[{\"distanceAlongGeometry\":53.7,\"announcement\":\"Head southeast on Beale Street, then turn right onto Mission Street\",\"ssmlAnnouncement\":\"\\u003cspeak\\u003e\\u003camazon:effect name\\u003d\\\"drc\\\"\\u003e\\u003cprosody rate\\u003d\\\"1.08\\\"\\u003eHead southeast on Beale Street, then turn right onto Mission Street\\u003c/prosody\\u003e\\u003c/amazon:effect\\u003e\\u003c/speak\\u003e\"}],\"bannerInstructions\":[{\"distanceAlongGeometry\":53.7,\"primary\":{\"text\":\"Mission Street\",\"components\":[{\"text\":\"Mission Street\",\"type\":\"text\",\"abbr\":\"Mission St\",\"abbr_priority\":0}],\"type\":\"turn\",\"modifier\":\"right\"},\"sub\":{\"text\":\"Fremont Street\",\"components\":[{\"text\":\"Fremont Street\",\"type\":\"text\",\"abbr\":\"Fremont St\",\"abbr_priority\":0}],\"type\":\"turn\",\"modifier\":\"right\"}}],\"driving_side\":\"right\",\"weight\":34.9,\"intersections\":[{\"location\":[-122.396255,37.791503],\"bearings\":[135],\"entry\":[true],\"out\":0}]},{\"distance\":108.6,\"duration\":36.7,\"geometry\":\"ozqagA`jmmhFxCtEvLjPfSrXbCdD\",\"name\":\"Mission Street\",\"mode\":\"driving\",\"maneuver\":{\"location\":[-122.395825,37.79116],\"bearing_before\":135.0,\"bearing_after\":225.0,\"instruction\":\"Turn right onto Mission Street\",\"type\":\"turn\",\"modifier\":\"right\"},\"voiceInstructions\":[{\"distanceAlongGeometry\":44.4,\"announcement\":\"Turn right onto Fremont Street\",\"ssmlAnnouncement\":\"\\u003cspeak\\u003e\\u003camazon:effect name\\u003d\\\"drc\\\"\\u003e\\u003cprosody rate\\u003d\\\"1.08\\\"\\u003eTurn right onto Fremont Street\\u003c/prosody\\u003e\\u003c/amazon:effect\\u003e\\u003c/speak\\u003e\"}],\"bannerInstructions\":[{\"distanceAlongGeometry\":108.6,\"primary\":{\"text\":\"Fremont Street\",\"components\":[{\"text\":\"Fremont Street\",\"type\":\"text\",\"abbr\":\"Fremont St\",\"abbr_priority\":0}],\"type\":\"turn\",\"modifier\":\"right\"}}],\"driving_side\":\"right\",\"weight\":61.5,\"intersections\":[{\"location\":[-122.395825,37.79116],\"bearings\":[45,135,225,315],\"entry\":[true,true,true,false],\"in\":3,\"out\":2}]},{\"distance\":283.1,\"duration\":76.4,\"geometry\":\"qopagA|`omhFeCdDmI~KkLzOyGbJqCzD}B`Bc\\\\xc@wBvES^Sb@cAtByApCu@v@_An@wGx@aSdCkCZ\",\"name\":\"Fremont Street\",\"mode\":\"driving\",\"maneuver\":{\"location\":[-122.396703,37.790473],\"bearing_before\":223.0,\"bearing_after\":315.0,\"instruction\":\"Turn right onto Fremont Street\",\"type\":\"turn\",\"modifier\":\"right\"},\"voiceInstructions\":[{\"distanceAlongGeometry\":263.1,\"announcement\":\"In 900 feet, turn left onto Pine Street\",\"ssmlAnnouncement\":\"\\u003cspeak\\u003e\\u003camazon:effect name\\u003d\\\"drc\\\"\\u003e\\u003cprosody rate\\u003d\\\"1.08\\\"\\u003eIn 900 feet, turn left onto Pine Street\\u003c/prosody\\u003e\\u003c/amazon:effect\\u003e\\u003c/speak\\u003e\"},{\"distanceAlongGeometry\":55.6,\"announcement\":\"Turn left onto Pine Street\",\"ssmlAnnouncement\":\"\\u003cspeak\\u003e\\u003camazon:effect name\\u003d\\\"drc\\\"\\u003e\\u003cprosody rate\\u003d\\\"1.08\\\"\\u003eTurn left onto Pine Street\\u003c/prosody\\u003e\\u003c/amazon:effect\\u003e\\u003c/speak\\u003e\"}],\"bannerInstructions\":[{\"distanceAlongGeometry\":283.1,\"primary\":{\"text\":\"Pine Street\",\"components\":[{\"text\":\"Pine Street\",\"type\":\"text\",\"abbr\":\"Pine St\",\"abbr_priority\":0}],\"type\":\"turn\",\"modifier\":\"left\"}}],\"driving_side\":\"right\",\"weight\":132.8,\"intersections\":[{\"location\":[-122.396703,37.790473],\"bearings\":[45,135,225,315],\"entry\":[false,false,true,true],\"in\":0,\"out\":3},{\"location\":[-122.398298,37.791734],\"bearings\":[135,300],\"entry\":[false,true],\"in\":0,\"out\":1}]},{\"distance\":1217.6,\"duration\":218.89999999999998,\"geometry\":\"yhtagAbxrmhFZxE`Cn^x@zLt@bLF|@XdEXlEx@dMvDbn@TrDXvElClb@`@|G^|ElAlR|@~Mf@|H`@bGfHjgAv@vMX|EtAlRxA`UnCdb@jAvQdJtvAZvETlDXjE~Cdf@nEfr@JxADp@Bf@Dd@Dv@N|BdKv~AzAnUdInoA\",\"name\":\"Pine Street\",\"mode\":\"driving\",\"maneuver\":{\"location\":[-122.39861,37.792413],\"bearing_before\":350.0,\"bearing_after\":260.0,\"instruction\":\"Turn left onto Pine Street\",\"type\":\"turn\",\"modifier\":\"left\"},\"voiceInstructions\":[{\"distanceAlongGeometry\":1197.6,\"announcement\":\"Continue on Pine Street for a half mile\",\"ssmlAnnouncement\":\"\\u003cspeak\\u003e\\u003camazon:effect name\\u003d\\\"drc\\\"\\u003e\\u003cprosody rate\\u003d\\\"1.08\\\"\\u003eContinue on Pine Street for a half mile\\u003c/prosody\\u003e\\u003c/amazon:effect\\u003e\\u003c/speak\\u003e\"},{\"distanceAlongGeometry\":389.4,\"announcement\":\"In a quarter mile, turn right onto Taylor Street\",\"ssmlAnnouncement\":\"\\u003cspeak\\u003e\\u003camazon:effect name\\u003d\\\"drc\\\"\\u003e\\u003cprosody rate\\u003d\\\"1.08\\\"\\u003eIn a quarter mile, turn right onto Taylor Street\\u003c/prosody\\u003e\\u003c/amazon:effect\\u003e\\u003c/speak\\u003e\"},{\"distanceAlongGeometry\":83.4,\"announcement\":\"Turn right onto Taylor Street, then turn left onto California Street\",\"ssmlAnnouncement\":\"\\u003cspeak\\u003e\\u003camazon:effect name\\u003d\\\"drc\\\"\\u003e\\u003cprosody rate\\u003d\\\"1.08\\\"\\u003eTurn right onto Taylor Street, then turn left onto California Street\\u003c/prosody\\u003e\\u003c/amazon:effect\\u003e\\u003c/speak\\u003e\"}],\"bannerInstructions\":[{\"distanceAlongGeometry\":1217.6,\"primary\":{\"text\":\"Taylor Street\",\"components\":[{\"text\":\"Taylor Street\",\"type\":\"text\",\"abbr\":\"Taylor St\",\"abbr_priority\":0}],\"type\":\"turn\",\"modifier\":\"right\"}},{\"distanceAlongGeometry\":83.4,\"primary\":{\"text\":\"Taylor Street\",\"components\":[{\"text\":\"Taylor Street\",\"type\":\"text\",\"abbr\":\"Taylor St\",\"abbr_priority\":0}],\"type\":\"turn\",\"modifier\":\"right\"},\"sub\":{\"text\":\"California Street\",\"components\":[{\"text\":\"California Street\",\"type\":\"text\",\"abbr\":\"California St\",\"abbr_priority\":0}],\"type\":\"turn\",\"modifier\":\"left\"}}],\"driving_side\":\"right\",\"weight\":364.5,\"intersections\":[{\"location\":[-122.39861,37.792413],\"bearings\":[75,165,255,345],\"entry\":[false,false,true,true],\"in\":1,\"out\":2},{\"location\":[-122.399785,37.792261],\"bearings\":[75,165,255,345],\"entry\":[false,true,true,false],\"in\":0,\"out\":2},{\"location\":[-122.400959,37.792116],\"bearings\":[75,165,255,345],\"entry\":[false,false,true,true],\"in\":0,\"out\":2},{\"location\":[-122.402598,37.791909],\"bearings\":[75,165,255,345],\"entry\":[false,true,true,false],\"in\":0,\"out\":2},{\"location\":[-122.404233,37.791703],\"bearings\":[75,180,255,345],\"entry\":[false,false,true,true],\"in\":0,\"out\":2},{\"location\":[-122.40576,37.791505],\"bearings\":[75,165,255,345],\"entry\":[false,false,true,true],\"in\":0,\"out\":2},{\"location\":[-122.407358,37.791301],\"bearings\":[75,165,255,345],\"entry\":[false,true,true,true],\"in\":0,\"out\":2},{\"location\":[-122.408952,37.791098],\"bearings\":[75,165,255,345],\"entry\":[false,false,true,true],\"in\":0,\"out\":2},{\"location\":[-122.409044,37.791087],\"bearings\":[75,165,255,345],\"entry\":[false,true,true,false],\"in\":0,\"out\":2},{\"location\":[-122.410639,37.790884],\"bearings\":[75,165,255,345],\"entry\":[false,true,true,false],\"in\":0,\"out\":2}]},{\"distance\":107.7,\"duration\":25.8,\"geometry\":\"e|pagA|nmnhFgEh@wn@pH}C^YD\",\"name\":\"Taylor Street\",\"mode\":\"driving\",\"maneuver\":{\"location\":[-122.412287,37.790675],\"bearing_before\":260.0,\"bearing_after\":350.0,\"instruction\":\"Turn right onto Taylor Street\",\"type\":\"turn\",\"modifier\":\"right\"},\"voiceInstructions\":[{\"distanceAlongGeometry\":62.6,\"announcement\":\"Turn left onto California Street, then turn left onto Jones Street\",\"ssmlAnnouncement\":\"\\u003cspeak\\u003e\\u003camazon:effect name\\u003d\\\"drc\\\"\\u003e\\u003cprosody rate\\u003d\\\"1.08\\\"\\u003eTurn left onto California Street, then turn left onto Jones Street\\u003c/prosody\\u003e\\u003c/amazon:effect\\u003e\\u003c/speak\\u003e\"}],\"bannerInstructions\":[{\"distanceAlongGeometry\":107.7,\"primary\":{\"text\":\"California Street\",\"components\":[{\"text\":\"California Street\",\"type\":\"text\",\"abbr\":\"California St\",\"abbr_priority\":0}],\"type\":\"turn\",\"modifier\":\"left\"}},{\"distanceAlongGeometry\":62.6,\"primary\":{\"text\":\"California Street\",\"components\":[{\"text\":\"California Street\",\"type\":\"text\",\"abbr\":\"California St\",\"abbr_priority\":0}],\"type\":\"turn\",\"modifier\":\"left\"},\"sub\":{\"text\":\"Jones Street\",\"components\":[{\"text\":\"Jones Street\",\"type\":\"text\",\"abbr\":\"Jones St\",\"abbr_priority\":0}],\"type\":\"turn\",\"modifier\":\"left\"}}],\"driving_side\":\"right\",\"weight\":70.3,\"intersections\":[{\"location\":[-122.412287,37.790675],\"bearings\":[75,165,255,345],\"entry\":[false,false,true,true],\"in\":0,\"out\":3}]},{\"distance\":146.2,\"duration\":42.4,\"geometry\":\"}wragA~zmnhF\\\\`FzAjUtGnbATtD\",\"name\":\"California Street\",\"mode\":\"driving\",\"maneuver\":{\"location\":[-122.41248,37.791631],\"bearing_before\":350.0,\"bearing_after\":260.0,\"instruction\":\"Turn left onto California Street\",\"type\":\"turn\",\"modifier\":\"left\"},\"voiceInstructions\":[{\"distanceAlongGeometry\":51.7,\"announcement\":\"Turn left onto Jones Street, then you will arrive at your destination\",\"ssmlAnnouncement\":\"\\u003cspeak\\u003e\\u003camazon:effect name\\u003d\\\"drc\\\"\\u003e\\u003cprosody rate\\u003d\\\"1.08\\\"\\u003eTurn left onto Jones Street, then you will arrive at your destination\\u003c/prosody\\u003e\\u003c/amazon:effect\\u003e\\u003c/speak\\u003e\"}],\"bannerInstructions\":[{\"distanceAlongGeometry\":146.2,\"primary\":{\"text\":\"Jones Street\",\"components\":[{\"text\":\"Jones Street\",\"type\":\"text\",\"abbr\":\"Jones St\",\"abbr_priority\":0}],\"type\":\"turn\",\"modifier\":\"left\"}}],\"driving_side\":\"right\",\"weight\":86.8,\"intersections\":[{\"location\":[-122.41248,37.791631],\"bearings\":[75,165,255,345],\"entry\":[true,false,true,true],\"in\":1,\"out\":2}]},{\"distance\":71.7,\"duration\":23.4,\"geometry\":\"wjragAraqnhF`@EvC]j@Ir_@oE\",\"name\":\"Jones Street\",\"mode\":\"driving\",\"maneuver\":{\"location\":[-122.414122,37.79142],\"bearing_before\":260.0,\"bearing_after\":170.0,\"instruction\":\"Turn left onto Jones Street\",\"type\":\"turn\",\"modifier\":\"left\"},\"voiceInstructions\":[{\"distanceAlongGeometry\":15.3,\"announcement\":\"You have arrived at your destination, on the right\",\"ssmlAnnouncement\":\"\\u003cspeak\\u003e\\u003camazon:effect name\\u003d\\\"drc\\\"\\u003e\\u003cprosody rate\\u003d\\\"1.08\\\"\\u003eYou have arrived at your destination, on the right\\u003c/prosody\\u003e\\u003c/amazon:effect\\u003e\\u003c/speak\\u003e\"}],\"bannerInstructions\":[{\"distanceAlongGeometry\":71.7,\"primary\":{\"text\":\"You will arrive\",\"components\":[{\"text\":\"You will arrive\",\"type\":\"text\"}],\"type\":\"arrive\",\"modifier\":\"right\"}},{\"distanceAlongGeometry\":15.3,\"primary\":{\"text\":\"You have arrived\",\"components\":[{\"text\":\"You have arrived\",\"type\":\"text\"}],\"type\":\"arrive\",\"modifier\":\"right\"}}],\"driving_side\":\"right\",\"weight\":23.4,\"intersections\":[{\"location\":[-122.414122,37.79142],\"bearings\":[75,165,255,345],\"entry\":[false,true,true,true],\"in\":0,\"out\":1}]},{\"distance\":0.0,\"duration\":0.0,\"geometry\":\"}bqagAtypnhF\",\"name\":\"Jones Street\",\"mode\":\"driving\",\"maneuver\":{\"location\":[-122.413995,37.790783],\"bearing_before\":171.0,\"bearing_after\":0.0,\"instruction\":\"You have arrived at your destination, on the right\",\"type\":\"arrive\",\"modifier\":\"right\"},\"voiceInstructions\":[],\"bannerInstructions\":[],\"driving_side\":\"right\",\"weight\":0.0,\"intersections\":[{\"location\":[-122.413995,37.790783],\"bearings\":[351],\"entry\":[true],\"in\":0}]}],\"annotation\":{\"distance\":[41.75872891540546,11.943930596414795,12.720147968330114,34.58112560559672,50.96480933738249,10.349556668565532,10.428744124966986,26.062939337835754,33.61207745353073,22.152629772397148,11.584122498337331,8.22504067141732,73.25791925952063,11.603839142628226,1.7930152150745173,1.9339724019326627,6.4182775391464615,8.137686480966448,3.8827293592940286,4.137411880032337,15.778927074065876,36.18605026816596,7.882482295429149,9.70628239052936,44.88520535070527,19.777529614845466,18.70069668033605,2.7608352091952852,8.820943994209998,9.167951891088123,20.211271187411434,67.05841934336348,8.004641462478803,9.602196312248573,50.45852431578543,12.710488322858675,9.917381766860117,27.67756036992424,21.374879966188537,14.151341864692084,11.581827207587462,103.10585401718104,20.975906679342675,9.863007930072529,27.750876716852083,31.428390784757813,50.12927675688965,26.70541846540595,124.91524890087112,9.619673955896003,7.744241825057303,9.081282300519934,55.824774196397755,72.99751351106848,4.01125146327413,2.22260556286811,1.7719511994183288,1.7030446015893967,2.4836226090145,5.608523009263369,136.39335067018692,32.0538539535892,114.65384371553199,11.274751280297357,86.03444465258252,8.898707903215941,1.4697888668235173,10.071397847728418,31.880018736822993,96.1785674755274,8.091589695903005,1.90914496306627,8.555399787319097,2.4861312264216893,58.775343965717596],\"congestion\":[\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"heavy\",\"moderate\",\"moderate\",\"moderate\",\"heavy\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"moderate\",\"moderate\",\"moderate\",\"moderate\",\"heavy\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"moderate\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\",\"low\"]}}],\"routeOptions\":{\"baseUrl\":\"https://api.mapbox.com\",\"user\":\"mapbox\",\"profile\":\"driving-traffic\",\"coordinates\":[[-122.396485,37.7913239],[-122.4142621,37.7907495]],\"alternatives\":true,\"language\":\"en\",\"continue_straight\":false,\"roundabout_exits\":false,\"geometries\":\"polyline6\",\"overview\":\"full\",\"steps\":true,\"annotations\":\"congestion,distance\",\"voice_instructions\":true,\"banner_instructions\":true,\"voice_units\":\"metric\",\"access_token\":\"$tokenHere\",\"uuid\":\"ck7dtdd2z00yx75plynvtan26\"},\"voiceLocale\":\"en\"}"
        // return DirectionsRoute.fromJson(directionsRouteAsJson)

        val multiStopsRouteJsonString = """
            {"routeIndex":"0","distance":2072.616,"duration":442.525,"geometry":"k~k{fAn{qmgFlEiChNNzOxA|JMrQyBzELjANUz~@iWl@z@|s@t@~IdFO~b@}@`GNlEOlF?jZl@vSiBtJwCbAO`D{@\\ObKuE|@m@~HuE~IaHlImJ|Um^je@_s@dEqGfYwb@pV__@~IwMvHkLvCcF`CmJzA_Jd@}IF_T?s[cAse@WwWGgN^yMfC_SlEcR{@k@sQ_JcLwCaL{A{p@?kdAOaWxB{UnIuJvD_IbFg@m@{@]u@?s@\\m@l@WjA?|@VjAuJlJk[j`@qBhCxBvCbF`HjG~HxGdFrFfCdJjBvI\\`BO","weight":442.525,"weight_name":"routability","legs":[{"distance":137.682,"duration":61.957,"summary":"Moreno Avenue","steps":[{"distance":137.682,"duration":61.957,"geometry":"k~k{fAn{qmgFlEiChNNzOxA|JMrQyBzEL","name":"Moreno Avenue","mode":"driving","maneuver":{"location":[-121.873863,37.689846],"bearing_before":0.0,"bearing_after":156.0,"instruction":"Head southeast on Moreno Avenue","type":"depart"},"voiceInstructions":[{"distanceAlongGeometry":137.682,"announcement":"Head southeast on Moreno Avenue, then you have arrived at your 1st destination, on the left","ssmlAnnouncement":"\u003cspeak\u003e\u003camazon:effect name\u003d\"drc\"\u003e\u003cprosody rate\u003d\"1.08\"\u003eHead southeast on Moreno Avenue, then you have arrived at your 1st destination, on the left\u003c/prosody\u003e\u003c/amazon:effect\u003e\u003c/speak\u003e"},{"distanceAlongGeometry":11.1,"announcement":"You have arrived at your 1st destination, on the left","ssmlAnnouncement":"\u003cspeak\u003e\u003camazon:effect name\u003d\"drc\"\u003e\u003cprosody rate\u003d\"1.08\"\u003eYou have arrived at your 1st destination, on the left\u003c/prosody\u003e\u003c/amazon:effect\u003e\u003c/speak\u003e"}],"bannerInstructions":[{"distanceAlongGeometry":137.682,"primary":{"text":"You will arrive","components":[{"text":"You will arrive","type":"text"}],"type":"arrive","modifier":"left"}},{"distanceAlongGeometry":11.1,"primary":{"text":"You have arrived","components":[{"text":"You have arrived","type":"text"}],"type":"arrive","modifier":"left"}}],"driving_side":"right","weight":61.957,"intersections":[{"location":[-121.873863,37.689846],"bearings":[156],"entry":[true],"out":0}]},{"distance":0.0,"duration":0.0,"geometry":"iri{fAtvqmgF??","name":"Moreno Avenue","mode":"driving","maneuver":{"location":[-121.873787,37.688629],"bearing_before":180.0,"bearing_after":0.0,"instruction":"You have arrived at your 1st destination, on the left","type":"arrive","modifier":"left"},"voiceInstructions":[],"bannerInstructions":[],"driving_side":"right","weight":0.0,"intersections":[{"location":[-121.873787,37.688629],"bearings":[0],"entry":[true],"in":0}]}],"annotation":{"distance":[13.0,27.2,30.4,21.2,33.6,12.3],"congestion":["unknown","unknown","unknown","unknown","unknown","unknown"]}},{"distance":137.301,"duration":58.136,"summary":"Moreno Avenue, Diavila Avenue","steps":[{"distance":4.301,"duration":1.935,"geometry":"iri{fAtvqmgFjAN","name":"Moreno Avenue","mode":"driving","maneuver":{"location":[-121.873787,37.688629],"bearing_before":0.0,"bearing_after":189.0,"instruction":"Head south on Moreno Avenue","type":"depart"},"voiceInstructions":[{"distanceAlongGeometry":4.301,"announcement":"Head south on Moreno Avenue, then turn right onto Diavila Avenue","ssmlAnnouncement":"\u003cspeak\u003e\u003camazon:effect name\u003d\"drc\"\u003e\u003cprosody rate\u003d\"1.08\"\u003eHead south on Moreno Avenue, then turn right onto Diavila Avenue\u003c/prosody\u003e\u003c/amazon:effect\u003e\u003c/speak\u003e"}],"bannerInstructions":[{"distanceAlongGeometry":4.301,"primary":{"text":"Diavila Avenue","components":[{"text":"Diavila Avenue","type":"text","abbr":"Diavila Ave","abbr_priority":0}],"type":"turn","modifier":"right"}}],"driving_side":"right","weight":1.935,"intersections":[{"location":[-121.873787,37.688629],"bearings":[189],"entry":[true],"out":0}]},{"distance":133.0,"duration":56.2,"geometry":"}oi{fAdwqmgFUz~@iWl@","name":"Diavila Avenue","mode":"driving","maneuver":{"location":[-121.873795,37.688591],"bearing_before":189.0,"bearing_after":270.0,"instruction":"Turn right onto Diavila Avenue","type":"turn","modifier":"right"},"voiceInstructions":[{"distanceAlongGeometry":11.8,"announcement":"You have arrived at your 2nd destination","ssmlAnnouncement":"\u003cspeak\u003e\u003camazon:effect name\u003d\"drc\"\u003e\u003cprosody rate\u003d\"1.08\"\u003eYou have arrived at your 2nd destination\u003c/prosody\u003e\u003c/amazon:effect\u003e\u003c/speak\u003e"}],"bannerInstructions":[{"distanceAlongGeometry":133.0,"primary":{"text":"You will arrive","components":[{"text":"You will arrive","type":"text"}],"type":"arrive","modifier":"straight"}},{"distanceAlongGeometry":11.8,"primary":{"text":"You have arrived","components":[{"text":"You have arrived","type":"text"}],"type":"arrive","modifier":"straight"}}],"driving_side":"right","weight":56.2,"intersections":[{"location":[-121.873795,37.688591],"bearings":[9,183,270],"entry":[false,true,true],"in":0,"out":2}]},{"distance":0.0,"duration":0.0,"geometry":"}hj{fAnxsmgF??","name":"Diavila Avenue","mode":"driving","maneuver":{"location":[-121.87484,37.688992],"bearing_before":357.0,"bearing_after":0.0,"instruction":"You have arrived at your 2nd destination","type":"arrive"},"voiceInstructions":[],"bannerInstructions":[],"driving_side":"right","weight":0.0,"intersections":[{"location":[-121.87484,37.688992],"bearings":[177],"entry":[true],"in":0}]}],"annotation":{"distance":[4.3,90.1,43.4],"congestion":["unknown","unknown","unknown"]}},{"distance":102.367,"duration":26.109,"summary":"Diavila Avenue, Milani Avenue","steps":[{"distance":90.0,"duration":15.429,"geometry":"}hj{fAnxsmgFz@|s@t@~I","name":"Diavila Avenue","mode":"driving","maneuver":{"location":[-121.87484,37.688992],"bearing_before":0.0,"bearing_after":267.0,"instruction":"Head west on Diavila Avenue","type":"depart"},"voiceInstructions":[{"distanceAlongGeometry":90.0,"announcement":"Head west on Diavila Avenue, then turn left onto Milani Avenue","ssmlAnnouncement":"\u003cspeak\u003e\u003camazon:effect name\u003d\"drc\"\u003e\u003cprosody rate\u003d\"1.08\"\u003eHead west on Diavila Avenue, then turn left onto Milani Avenue\u003c/prosody\u003e\u003c/amazon:effect\u003e\u003c/speak\u003e"},{"distanceAlongGeometry":87.5,"announcement":"Turn left onto Milani Avenue, then you will arrive at your 3rd destination","ssmlAnnouncement":"\u003cspeak\u003e\u003camazon:effect name\u003d\"drc\"\u003e\u003cprosody rate\u003d\"1.08\"\u003eTurn left onto Milani Avenue, then you will arrive at your 3rd destination\u003c/prosody\u003e\u003c/amazon:effect\u003e\u003c/speak\u003e"}],"bannerInstructions":[{"distanceAlongGeometry":90.0,"primary":{"text":"Milani Avenue","components":[{"text":"Milani Avenue","type":"text","abbr":"Milani Ave","abbr_priority":0}],"type":"turn","modifier":"left"}}],"driving_side":"right","weight":15.429,"intersections":[{"location":[-121.87484,37.688992],"bearings":[267],"entry":[true],"out":0}]},{"distance":12.367,"duration":10.68,"geometry":"kej{fAlxumgFdFO","name":"Milani Avenue","mode":"driving","maneuver":{"location":[-121.875862,37.688934],"bearing_before":259.0,"bearing_after":177.0,"instruction":"Turn left onto Milani Avenue","type":"turn","modifier":"left"},"voiceInstructions":[{"distanceAlongGeometry":5.8,"announcement":"You have arrived at your 3rd destination","ssmlAnnouncement":"\u003cspeak\u003e\u003camazon:effect name\u003d\"drc\"\u003e\u003cprosody rate\u003d\"1.08\"\u003eYou have arrived at your 3rd destination\u003c/prosody\u003e\u003c/amazon:effect\u003e\u003c/speak\u003e"}],"bannerInstructions":[{"distanceAlongGeometry":12.367,"primary":{"text":"You will arrive","components":[{"text":"You will arrive","type":"text"}],"type":"arrive","modifier":"straight"}},{"distanceAlongGeometry":5.8,"primary":{"text":"You have arrived","components":[{"text":"You have arrived","type":"text"}],"type":"arrive","modifier":"straight"}}],"driving_side":"right","weight":10.68,"intersections":[{"location":[-121.875862,37.688934],"bearings":[79,177,248],"entry":[false,true,true],"in":0,"out":1}]},{"distance":0.0,"duration":0.0,"geometry":"e~i{fA|wumgF??","name":"Milani Avenue","mode":"driving","maneuver":{"location":[-121.875854,37.68882],"bearing_before":177.0,"bearing_after":0.0,"instruction":"You have arrived at your 3rd destination","type":"arrive"},"voiceInstructions":[],"bannerInstructions":[],"driving_side":"right","weight":0.0,"intersections":[{"location":[-121.875854,37.68882],"bearings":[357],"entry":[true],"in":0}]}],"annotation":{"distance":[74.7,15.7,12.8],"congestion":["unknown","unknown","unknown"]}},{"distance":223.947,"duration":56.551,"summary":"Milani Avenue, Rheem Drive","steps":[{"distance":223.947,"duration":56.551,"geometry":"e~i{fA|wumgF~b@}@`GNlEOlF?jZl@vSiBtJwCbAO`D{@","name":"Milani Avenue","mode":"driving","maneuver":{"location":[-121.875854,37.68882],"bearing_before":0.0,"bearing_after":177.0,"instruction":"Head south on Milani Avenue","type":"depart"},"voiceInstructions":[{"distanceAlongGeometry":223.947,"announcement":"Head south on Milani Avenue, then you have arrived at your 4th destination","ssmlAnnouncement":"\u003cspeak\u003e\u003camazon:effect name\u003d\"drc\"\u003e\u003cprosody rate\u003d\"1.08\"\u003eHead south on Milani Avenue, then you have arrived at your 4th destination\u003c/prosody\u003e\u003c/amazon:effect\u003e\u003c/speak\u003e"},{"distanceAlongGeometry":19.8,"announcement":"You have arrived at your 4th destination","ssmlAnnouncement":"\u003cspeak\u003e\u003camazon:effect name\u003d\"drc\"\u003e\u003cprosody rate\u003d\"1.08\"\u003eYou have arrived at your 4th destination\u003c/prosody\u003e\u003c/amazon:effect\u003e\u003c/speak\u003e"}],"bannerInstructions":[{"distanceAlongGeometry":223.947,"primary":{"text":"You will arrive","components":[{"text":"You will arrive","type":"text"}],"type":"arrive","modifier":"straight"}},{"distanceAlongGeometry":19.8,"primary":{"text":"You have arrived","components":[{"text":"You have arrived","type":"text"}],"type":"arrive","modifier":"straight"}}],"driving_side":"right","weight":56.551,"intersections":[{"location":[-121.875854,37.68882],"bearings":[177],"entry":[true],"out":0},{"location":[-121.875832,37.688114],"bearings":[3,89,177,269],"entry":[false,false,true,true],"in":0,"out":2},{"location":[-121.875824,37.688011],"bearings":[92,180,270,357],"entry":[true,true,false,false],"in":3,"out":1},{"location":[-121.875717,37.686935],"bearings":[170,251,342],"entry":[true,true,false],"in":2,"out":0},{"location":[-121.87571,37.686901],"bearings":[84,163,350],"entry":[true,true,false],"in":2,"out":1}]},{"distance":0.0,"duration":0.0,"geometry":"gaf{fA~lumgF??","name":"Rheem Drive","mode":"driving","maneuver":{"location":[-121.875679,37.686821],"bearing_before":163.0,"bearing_after":0.0,"instruction":"You have arrived at your 4th destination","type":"arrive"},"voiceInstructions":[],"bannerInstructions":[],"driving_side":"right","weight":0.0,"intersections":[{"location":[-121.875679,37.686821],"bearings":[343],"entry":[true],"in":0}]}],"annotation":{"distance":[64.2,14.5,11.5,13.2,48.9,37.2,21.9,3.9,9.3],"congestion":["unknown","unknown","unknown","unknown","unknown","unknown","unknown","unknown","unknown"]}},{"distance":787.128,"duration":126.52,"summary":"Rheem Drive, Kamp Drive","steps":[{"distance":783.686,"duration":118.645,"geometry":"gaf{fA~lumgF\\ObKuE|@m@~HuE~IaHlImJ|Um^je@_s@dEqGfYwb@pV__@~IwMvHkLvCcF`CmJzA_Jd@}IF_T?s[cAse@WwWGgN^yMfC_SlEcR","name":"Rheem Drive","mode":"driving","maneuver":{"location":[-121.875679,37.686821],"bearing_before":0.0,"bearing_after":156.0,"instruction":"Head southeast on Rheem Drive","type":"depart"},"voiceInstructions":[{"distanceAlongGeometry":783.686,"announcement":"Head southeast on Rheem Drive for 800 meters","ssmlAnnouncement":"\u003cspeak\u003e\u003camazon:effect name\u003d\"drc\"\u003e\u003cprosody rate\u003d\"1.08\"\u003eHead southeast on Rheem Drive for 800 meters\u003c/prosody\u003e\u003c/amazon:effect\u003e\u003c/speak\u003e"},{"distanceAlongGeometry":462.4,"announcement":"In 500 meters, turn left onto Kamp Drive","ssmlAnnouncement":"\u003cspeak\u003e\u003camazon:effect name\u003d\"drc\"\u003e\u003cprosody rate\u003d\"1.08\"\u003eIn 500 meters, turn left onto Kamp Drive\u003c/prosody\u003e\u003c/amazon:effect\u003e\u003c/speak\u003e"},{"distanceAlongGeometry":99.1,"announcement":"Turn left onto Kamp Drive, then you will arrive at your 5th destination","ssmlAnnouncement":"\u003cspeak\u003e\u003camazon:effect name\u003d\"drc\"\u003e\u003cprosody rate\u003d\"1.08\"\u003eTurn left onto Kamp Drive, then you will arrive at your 5th destination\u003c/prosody\u003e\u003c/amazon:effect\u003e\u003c/speak\u003e"}],"bannerInstructions":[{"distanceAlongGeometry":783.686,"primary":{"text":"Kamp Drive","components":[{"text":"Kamp Drive","type":"text","abbr":"Kamp Dr","abbr_priority":0}],"type":"turn","modifier":"left"}}],"driving_side":"right","weight":118.645,"intersections":[{"location":[-121.875679,37.686821],"bearings":[156],"entry":[true],"out":0},{"location":[-121.875542,37.686581],"bearings":[152,260,334],"entry":[true,true,false],"in":2,"out":0},{"location":[-121.875435,37.68642],"bearings":[58,147,332],"entry":[true,true,false],"in":2,"out":1},{"location":[-121.87529,37.686245],"bearings":[139,222,327],"entry":[true,true,false],"in":2,"out":0},{"location":[-121.874603,37.685711],"bearings":[133,222,313],"entry":[true,true,false],"in":2,"out":0},{"location":[-121.873772,37.685097],"bearings":[133,225,313],"entry":[true,true,false],"in":2,"out":0},{"location":[-121.873062,37.684578],"bearings":[133,222,313],"entry":[true,true,false],"in":2,"out":0},{"location":[-121.872551,37.6842],"bearings":[42,133,313],"entry":[true,true,false],"in":2,"out":1},{"location":[-121.872314,37.684025],"bearings":[133,224,313],"entry":[true,true,false],"in":2,"out":0},{"location":[-121.871986,37.683792],"bearings":[49,114,235,311],"entry":[true,true,true,false],"in":3,"out":1},{"location":[-121.871452,37.683662],"bearings":[91,180,278],"entry":[true,true,false],"in":2,"out":0},{"location":[-121.871117,37.683659],"bearings":[0,90,271],"entry":[true,true,false],"in":2,"out":1},{"location":[-121.870659,37.683659],"bearings":[86,183,270],"entry":[true,true,false],"in":2,"out":0},{"location":[-121.870041,37.683693],"bearings":[88,266,358],"entry":[true,false,true],"in":1,"out":0},{"location":[-121.869644,37.683704],"bearings":[88,180,268],"entry":[true,true,false],"in":2,"out":0}]},{"distance":3.442,"duration":7.876,"geometry":"as_{fArngmgF{@k@","name":"Kamp Drive","mode":"driving","maneuver":{"location":[-121.868538,37.683521],"bearing_before":113.0,"bearing_after":31.0,"instruction":"Turn left onto Kamp Drive","type":"end of road","modifier":"left"},"voiceInstructions":[{"distanceAlongGeometry":2.2,"announcement":"You have arrived at your 5th destination","ssmlAnnouncement":"\u003cspeak\u003e\u003camazon:effect name\u003d\"drc\"\u003e\u003cprosody rate\u003d\"1.08\"\u003eYou have arrived at your 5th destination\u003c/prosody\u003e\u003c/amazon:effect\u003e\u003c/speak\u003e"}],"bannerInstructions":[{"distanceAlongGeometry":3.442,"primary":{"text":"You will arrive","components":[{"text":"You will arrive","type":"text"}],"type":"arrive","modifier":"straight"}},{"distanceAlongGeometry":2.2,"primary":{"text":"You have arrived","components":[{"text":"You have arrived","type":"text"}],"type":"arrive","modifier":"straight"}}],"driving_side":"right","weight":7.876,"intersections":[{"location":[-121.868538,37.683521],"bearings":[31,201,293],"entry":[true,true,false],"in":2,"out":0}]},{"distance":0.0,"duration":0.0,"geometry":"}t_{fAfmgmgF??","name":"Kamp Drive","mode":"driving","maneuver":{"location":[-121.868515,37.683552],"bearing_before":31.0,"bearing_after":0.0,"instruction":"You have arrived at your 5th destination","type":"arrive"},"voiceInstructions":[],"bannerInstructions":[],"driving_side":"right","weight":0.0,"intersections":[{"location":[-121.868515,37.683552],"bearings":[211],"entry":[true],"in":0}]}],"annotation":{"distance":[1.8,23.6,4.0,20.2,23.3,24.7,60.2,100.2,16.4,68.7,61.6,28.6,25.6,13.2,17.7,16.3,15.6,29.6,40.3,54.6,35.0,21.5,20.9,29.2,29.2,3.9],"congestion":["unknown","unknown","unknown","unknown","unknown","unknown","unknown","unknown","unknown","unknown","unknown","unknown","unknown","unknown","unknown","unknown","unknown","unknown","unknown","unknown","unknown","unknown","unknown","unknown","unknown","unknown"]}},{"distance":556.558,"duration":90.549,"summary":"Kamp Drive","steps":[{"distance":426.558,"duration":55.777,"geometry":"}t_{fAfmgmgFsQ_JcLwCaL{A{p@?kdAOaWxB{UnIuJvD_IbF","name":"Kamp Drive","mode":"driving","maneuver":{"location":[-121.868515,37.683552],"bearing_before":0.0,"bearing_after":24.0,"instruction":"Head northeast on Kamp Drive","type":"depart"},"voiceInstructions":[{"distanceAlongGeometry":426.558,"announcement":"Head northeast on Kamp Drive, then enter the roundabout and take the 2nd exit onto Kamp Drive","ssmlAnnouncement":"\u003cspeak\u003e\u003camazon:effect name\u003d\"drc\"\u003e\u003cprosody rate\u003d\"1.08\"\u003eHead northeast on Kamp Drive, then enter the roundabout and take the 2nd exit onto Kamp Drive\u003c/prosody\u003e\u003c/amazon:effect\u003e\u003c/speak\u003e"},{"distanceAlongGeometry":114.7,"announcement":"Enter the roundabout and take the 2nd exit onto Kamp Drive, then you will arrive at your 6th destination","ssmlAnnouncement":"\u003cspeak\u003e\u003camazon:effect name\u003d\"drc\"\u003e\u003cprosody rate\u003d\"1.08\"\u003eEnter the roundabout and take the 2nd exit onto Kamp Drive, then you will arrive at your 6th destination\u003c/prosody\u003e\u003c/amazon:effect\u003e\u003c/speak\u003e"}],"bannerInstructions":[{"distanceAlongGeometry":426.558,"primary":{"text":"Kamp Drive","components":[{"text":"Kamp Drive","type":"text","abbr":"Kamp Dr","abbr_priority":0}],"type":"roundabout","modifier":"right","degrees":189.0,"driving_side":"right"}}],"driving_side":"right","weight":55.777,"intersections":[{"location":[-121.868515,37.683552],"bearings":[24],"entry":[true],"out":0},{"location":[-121.868217,37.684269],"bearings":[0,190,272],"entry":[true,false,true],"in":1,"out":0},{"location":[-121.868217,37.685066],"bearings":[0,92,180],"entry":[true,true,false],"in":2,"out":0},{"location":[-121.868271,37.686562],"bearings":[79,172,339],"entry":[true,false,true],"in":1,"out":2}]},{"distance":130.0,"duration":34.772,"geometry":"s}f{fAhugmgFg@m@{@]u@?s@\\m@l@WjA?|@VjAuJlJk[j`@qBhC","name":"Kamp Drive","mode":"driving","maneuver":{"location":[-121.868645,37.687275],"bearing_before":331.0,"bearing_after":10.0,"instruction":"Enter the roundabout and take the 2nd exit onto Kamp Drive","type":"roundabout","modifier":"slight right","exit":2},"voiceInstructions":[{"distanceAlongGeometry":18.7,"announcement":"You have arrived at your 6th destination","ssmlAnnouncement":"\u003cspeak\u003e\u003camazon:effect name\u003d\"drc\"\u003e\u003cprosody rate\u003d\"1.08\"\u003eYou have arrived at your 6th destination\u003c/prosody\u003e\u003c/amazon:effect\u003e\u003c/speak\u003e"}],"bannerInstructions":[{"distanceAlongGeometry":130.0,"primary":{"text":"You will arrive","components":[{"text":"You will arrive","type":"text"}],"type":"arrive","modifier":"straight"}},{"distanceAlongGeometry":18.7,"primary":{"text":"You have arrived","components":[{"text":"You have arrived","type":"text"}],"type":"arrive","modifier":"straight"}}],"driving_side":"right","weight":34.772,"intersections":[{"location":[-121.868645,37.687275],"bearings":[10,151,282],"entry":[true,false,false],"in":1,"out":0},{"location":[-121.868622,37.687378],"bearings":[56,190,283],"entry":[true,false,true],"in":1,"out":2},{"location":[-121.868752,37.687401],"bearings":[103,193,322],"entry":[false,true,true],"in":0,"out":2},{"location":[-121.869469,37.688042],"bearings":[46,138,224,316],"entry":[false,false,false,true],"in":1,"out":3}]},{"distance":0.0,"duration":0.0,"geometry":"cqh{fAbmimgF??","name":"Kamp Drive","mode":"driving","maneuver":{"location":[-121.869537,37.688099],"bearing_before":316.0,"bearing_after":0.0,"instruction":"You have arrived at your 6th destination","type":"arrive"},"voiceInstructions":[],"bannerInstructions":[],"driving_side":"right","weight":0.0,"intersections":[{"location":[-121.869537,37.688099],"bearings":[136],"entry":[true],"in":0}]}],"annotation":{"distance":[36.6,24.3,23.7,88.8,123.6,43.2,43.4,22.3,20.5,2.9,3.7,3.0,3.3,3.2,3.6,2.7,3.6,26.3,69.0,8.8],"congestion":["unknown","unknown","unknown","unknown","unknown","unknown","unknown","unknown","unknown","unknown","unknown","unknown","unknown","unknown","unknown","unknown","unknown","unknown","unknown","unknown"]}},{"distance":127.632,"duration":22.704,"summary":"Eilene Drive","steps":[{"distance":127.632,"duration":22.704,"geometry":"cqh{fAbmimgFxBvCbF`HjG~HxGdFrFfCdJjBvI\\`BO","name":"Eilene Drive","mode":"driving","maneuver":{"location":[-121.869537,37.688099],"bearing_before":0.0,"bearing_after":225.0,"instruction":"Head southwest on Eilene Drive","type":"depart"},"voiceInstructions":[{"distanceAlongGeometry":127.632,"announcement":"Head southwest on Eilene Drive, then you have arrived at your destination","ssmlAnnouncement":"\u003cspeak\u003e\u003camazon:effect name\u003d\"drc\"\u003e\u003cprosody rate\u003d\"1.08\"\u003eHead southwest on Eilene Drive, then you have arrived at your destination\u003c/prosody\u003e\u003c/amazon:effect\u003e\u003c/speak\u003e"},{"distanceAlongGeometry":28.1,"announcement":"You have arrived at your destination","ssmlAnnouncement":"\u003cspeak\u003e\u003camazon:effect name\u003d\"drc\"\u003e\u003cprosody rate\u003d\"1.08\"\u003eYou have arrived at your destination\u003c/prosody\u003e\u003c/amazon:effect\u003e\u003c/speak\u003e"}],"bannerInstructions":[{"distanceAlongGeometry":127.632,"primary":{"text":"You will arrive","components":[{"text":"You will arrive","type":"text"}],"type":"arrive","modifier":"straight"}},{"distanceAlongGeometry":28.1,"primary":{"text":"You have arrived","components":[{"text":"You have arrived","type":"text"}],"type":"arrive","modifier":"straight"}}],"driving_side":"right","weight":22.704,"intersections":[{"location":[-121.869537,37.688099],"bearings":[225],"entry":[true],"out":0},{"location":[-121.869614,37.688038],"bearings":[45,137,225,315],"entry":[false,false,true,false],"in":0,"out":2},{"location":[-121.870171,37.687176],"bearings":[5,173,267,315],"entry":[false,true,true,false],"in":0,"out":1}]},{"distance":0.0,"duration":0.0,"geometry":"ktf{fAdtjmgF??","name":"Eilene Drive","mode":"driving","maneuver":{"location":[-121.870163,37.687126],"bearing_before":173.0,"bearing_after":0.0,"instruction":"You have arrived at your destination","type":"arrive"},"voiceInstructions":[],"bannerInstructions":[],"driving_side":"right","weight":0.0,"intersections":[{"location":[-121.870163,37.687126],"bearings":[353],"entry":[true],"in":0}]}],"annotation":{"distance":[9.6,18.0,20.5,18.7,14.9,20.5,19.2,5.6],"congestion":["unknown","unknown","unknown","unknown","unknown","unknown","unknown","unknown"]}}],"routeOptions":{"baseUrl":"https://api.mapbox.com","user":"mapbox","profile":"driving","coordinates":[[-121.8736426,37.6899353],[-121.873722,37.6886261],[-121.874864,37.6889632],[-121.8758279,37.6888177],[-121.8756796,37.6868211],[-121.8684882,37.683542],[-121.8695048,37.6881114],[-121.8702061,37.6871203]],"alternatives":true,"language":"en","continue_straight":false,"roundabout_exits":false,"geometries":"polyline6","overview":"full","steps":true,"annotations":"congestion,distance","voice_instructions":true,"banner_instructions":true,"voice_units":"metric","access_token":"pk.eyJ1IjoianVuZGFpIiwiYSI6ImNrNW9qb3ZrdDA3bm0zZXBjc3E5Njdld2gifQ.e8XLy4jnrnpWnGKGiEcVMQ","uuid":"qppk6H03qA98Byqmuwu3vTx06-IUE0y--9vKyoZg4dod7wqTMFlmXg\u003d\u003d"},"voiceLocale":"en-US"}
        """.trimIndent()
        return DirectionsRoute.fromJson(multiStopsRouteJsonString)
    }
}
